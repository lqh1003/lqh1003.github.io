---
title: js判断数据类型
date: 2025-07-23 15:20:50
tags:
categories: Javascript
---

### typeof A 判断数据类型

```javascript
// 基础数据类型：数字、字符串、布尔值、未定义、空值、Symbol(ES6新增)、BigInt(ES2020新增)
console.log(typeof 42) // "number"
console.log(typeof 'Hello, world!') // "string"
console.log(typeof true) // "boolean"
console.log(typeof undefined) // "undefined"
console.log(typeof null) // "object" (这是一个历史遗留问题)
console.log(typeof Symbol('symbol')) // "symbol"
console.log(typeof 123n) // "bigint"

// 引用数据类型：普通对象、数组、函数、new Date()等
console.log(typeof { name: 'Alice', age: 25 }) // "object"
console.log(typeof [1, 2, 3]) // "object"
console.log(typeof new Date()) // "object"
console.log(typeof function () {} || typeof new Function()) // "function" (特殊)
```

【注意】

- 基础数据类型：typeof 返回对应类型，除了 null，typeof null 返回"object"是一个 JS 的历史遗留问题
- 数组 Array/函数 Function/new Date()/new RegExp()/new XXX 等都属于对象类型范畴，属于广义的"对象"，但不是狭义的"普通对象"，所以 typeof 判断类型都返回"object"，除了函数 Function
- JavaScript 为了突出函数的"可执行性"和简化类型判断而做的特殊设计 —— 函数本质上是一种"可调用的对象"，但 typeof 刻意返回"function"来强调其特殊性

### A instanceof B 判断数据类型

- instanceof  用于判断一个对象是否是另一个对象的实例
- instanceof  对于内置对象类型和自定义类都有效
- instanceof  对于原始类型无效，但可以通过构造函数包装对象进行判断

```javascript
// 创建一个构造函数
function Person(name) {
	this.name = name
}
// 创建一个实例
const alice = new Person('Alice')
// 判断实例与构造函数的关系
console.log(alice instanceof Person) // true

// 判断内置对象类型
console.log([] instanceof Array) // true
console.log({} instanceof Object) // true
console.log(new Date() instanceof Date) // true
console.log(/regex/ instanceof RegExp) // true
// 自定义类
class Animal {}
class Dog extends Animal {}
const myDog = new Dog()
console.log(myDog instanceof Dog) // true
console.log(myDog instanceof Animal) // true
console.log(myDog instanceof Object) // true

// 注意 `instanceof` 只对对象有效，对原始类型无效
console.log(42 instanceof Number) // false
console.log('Hello' instanceof String) // false
console.log(true instanceof Boolean) // false

// 对于原始类型，可以使用构造函数包装对象进行判断
console.log(new Number(42) instanceof Number) // true
console.log(new String('Hello') instanceof String) // true
console.log(new Boolean(true) instanceof Boolean) // true
null instanceof null // 控制台报错：右侧不是对象
```

### Array.isArray(value)：专门用于判断一个值是否为数组

```javascript
// 数组
console.log(Array.isArray([1, 2, 3])) // true
// 对象
console.log(Array.isArray({ name: 'Alice', age: 25 })) // false
// 字符串
console.log(Array.isArray('Hello, world!')) // false
// 数字
console.log(Array.isArray(42)) // false
// 布尔值
console.log(Array.isArray(true)) // false
// null
console.log(Array.isArray(null)) // false
// undefined
console.log(Array.isArray(undefined)) // false
// 函数
console.log(Array.isArray(function () {})) // false
// Date 对象
console.log(Array.isArray(new Date())) // false
// 正则表达式
console.log(Array.isArray(/regex/)) // false
```

### 判断是否为数组的方法

- 推荐使用`Array.isArray(arr)`方法，它是最简洁和可靠的，Es6 专门为此设计的方法
- `A instanceof B`
  const value = [1, 2, 3];
  console.log(value instanceof Array); // true
- `Object.prototype.toString` (老方法)
  const value = [1, 2, 3];
  console.log(Object.prototype.toString.call(value) === '[object Array]'); // true

### 写一个可以判断任意数据类型的方法（`原生数据类型`）

```javascript
function getType(value) {
	// 使用 Object.prototype.toString.call() 获取类型标签
	const typeTag = Object.prototype.toString.call(value)
	// 从标签中提取类型名称（如 "[object String]" → "String"）
	const typeText = typeTag.slice(8, -1)
	return typeText // 返回类型: 首字母大写的字符串
	// return typeText.toLowerCase();  // 全部小写
}
// 测试示例
console.log(getType('hello')) // "String"（字符串）
console.log(getType(123)) // "Number"（数字）
console.log(getType(true)) // "Boolean"（布尔值）
console.log(getType(null)) // "Null"（null）
console.log(getType(undefined)) // "Undefined"（undefined）
console.log(getType({})) // "Object"（普通对象）
console.log(getType([])) // "Array"（数组）
console.log(getType(function () {})) // "Function"（函数）
console.log(getType(new Date())) // "Date"（日期对象）
console.log(getType(/\d+/)) // "RegExp"（正则对象）
console.log(getType(new Map())) // "Map"（Map对象）
console.log(getType(new WeakMap())) // "WeakMap"（WeakMap对象）
console.log(getType(new Set())) // "Set"（Set对象）
console.log(getType(new WeakSet())) // "WeakSet"（WeakSet对象）
console.log(getType(Symbol())) // "Symbol"（Symbol类型）
console.log(getType(new Error())) // "Error"（错误对象）
console.log(getType(new Promise(() => {}))) // 'Promise'
console.log(getType(new ArrayBuffer(10))) // 'Arraybuffer'
console.log(getType(new Int32Array())) // 'Typedarray'
console.log(getType(NaN)) // 'Number'（NaN属于数字类型）
```

### 写一个可以判断`原生数据类型+自定义数据类型`的方法

- 在 JS 中，除了原生数据类型，还可以自定义数据类型

  - 在 JavaScript 中，自定义数据类型通常通过构造函数（new 关键字）或 ES6 Class（class 关键字）实现，本质是创建具有特定属性和方法的对象类型
  - 自定义数据类型，无法用 Object.prototype.toString.call()判断类型，得到的都是 Object
    ```javascript
    function Person(name, age) {
    	this.name = name
    	this.age = age
    }
    const alice = new Person('Alice', 20)
    Object.prototype.toString.call(alice) // '[object Object]'
    ```

- 先判断自定义数据类型，是则返回自定义数据类型的构造函数名，否则返回对应原生数据类型

```javascript
/**
 * 综合判断所有数据类型，包括原生类型和自定义类型
 * @param {*} value - 需要判断类型的值
 * @returns {string} 类型名称（如 'number'、'string'、'array'、'Person'、'Book' 等）
 */
function getFullType(value) {
	// 处理TypedArray
	if (ArrayBuffer.isView(value)) {
		return 'typedarray'
	}
	// 处理自定义类型 —— 检查构造函数名称
	if (value.constructor && typeof value.constructor === 'function') {
		const constructorName = value.constructor.name
		// 排除Object构造函数（避免所有对象都返回'Object'）
		if (constructorName !== 'Object') {
			return constructorName
		}
	}
	// 处理自定义标识（如果对象有Symbol.toStringTag）
	if (typeof value[Symbol.toStringTag] === 'string') {
		return value[Symbol.toStringTag]
	}

	// 判断原生数据类型
	const typeTag = Object.prototype.toString.call(value)
	return typeTag.slice(8, -1).toLowerCase()
}

// 测试原生类型
console.log(getFullType('hello')) // 'string'
console.log(getFullType(123)) // 'number'
console.log(getFullType(true)) // 'boolean'
console.log(getFullType(null)) // 'null'
console.log(getFullType(undefined)) // 'undefined'
console.log(getFullType([])) // 'array'
console.log(getFullType({})) // 'object'
console.log(getFullType(new Date())) // 'date'
console.log(getFullType(/\d+/)) // 'regexp'
console.log(getFullType(new Map())) // 'map'
console.log(getFullType(function () {})) // 'function'
// 测试自定义构造函数
function Person(name) {
	this.name = name
}
console.log(getFullType(new Person('张三'))) // 'Person'
// 测试ES6类
class Book {
	constructor(title) {
		this.title = title
	}
}
console.log(getFullType(new Book('JavaScript指南'))) // 'Book'
// 测试带自定义标识的类
class Product {
	constructor(id) {
		this.id = id
		this[Symbol.toStringTag] = 'Product'
	}
}
console.log(getFullType(new Product(1001))) // 'Product'
```
