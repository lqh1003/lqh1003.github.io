---
title: 搭建个人博客
date: 2025-07-23 12:07:48
tags:
  - hexo
  - gitlab
  - Gitlab Pages
cover: /images/搭建个人博客/cover.jpg  # 封面图
categories: Hexo   # 分类
---

### ***搭建开发环境(安装 node.js)

```bash
npm - v
node - v // 检查是否安装完成
```

### ***安装博客框架 hexo 脚手架

```bash
npm install -g hexo-cli
```

### ***切换到国内镜像源

```bash
npm config set https://registry.npmmirror.com  // 淘宝镜像源(安装更快)
```

### ***搭建博客项目

```bash
hexo init my-blog
cd my-blog
npm i
hexo server   // 本地预览博客，简写 hexo s
```

![](/images/搭建个人博客/hexo_init.png)

### ***代码托管到 gitlab 或 github

- 新建一个 gitlab 仓库，仓库名是 xxx.gitlab.io，xxx 是你的 gitlab 用户名
- 与本地仓库 my-blog 建立连接

  ```bash
  git init   // 初始化.git
  git remote add origin https://gitlab.com/xxx.gitlab.io.git  // 建立连接
  git branch -M main  // 修改分支名称
  ```

- 配置 Hexo 部署

  - 安装 Gitlab Pages 部署插件 npm install hexo-deployer-git -D (hexo deploy 命令用到该插件)
  - 修改  _config.yml  文件中的部署配置

  ```yaml
  deploy:
    type: git
    repository: git@gitlab.com:xxx.gitlab.io.gi
    branch: main
  ```

- 创建 .gitlab-ci.yml （GitLab 内置功能 CI/CD 的配置文件：代码部署上线全自动化）
  ![](/images/搭建个人博客/gitlab-ci-yml.png)

- 推送本地代码到远程
  - 可以新增 .gitignore 文件，忽略 node_modules 等代码提交
  - 取消仓库 main 分支保护 Settings → Repository → Protected branches (如果代码推送失败，取消分支保护重新推送)
  - 生成静态文件并部署代码到仓库：hexo clean; hexo generate; hexo deploy
  - 推送到远程仓库 【每次推送代码会自动触发管道 CI/CD】
  ```bash
  git add .
  git commit -m "first commit"
  git push -u origin main
  ```
- 访问博客链接：Deploy → Pages → 可以找到博客链接 https://xxx.gitlab.io/ (等待 1-5 分钟就可以打开了)

### ***扩展

- 如果在 Gitlab 没有找到 Pages，检查一下`仓库`以及`仓库所在项目组`的权限是否是最高权限且公开(Public)的

- 第一次推送代码到远程，我构建失败了(在 Build → Pipelines 下可以查看构建状态)
  - 找到构建失败的原因(我是因为需要进行账号或者身份认证认证)，解决之后重新推送代码即可
    ![](/images/搭建个人博客/gitRuning0.png)
- 新增一篇博客内容
  - 执行 "hexo new post 文章标题 xxx" 创建一篇新博客
    ![](/images/搭建个人博客/firstBlog.png)
  - 本地预览效果：hexo clean; hexo g; hexo d; hexo s
  - 推送到远程【每次推送代码会自动触发管道 CI/CI】
    - 当状态 Runing → Passed，即构建成功，刷新线上博客即可看到
      ![](/images/搭建个人博客/gitRuning.png)
- 更换博客主题，hexo 有很多开源免费的主题：https://hexo.io/themes
  - 使用 npm 方式下载主题依赖，如 butterfly 主题官网 https://butterfly.js.org/
    - 在 Hexo 项目根目录下执行： npm install hexo-theme-butterfly -D
    - 安装这个主题需要的插件：npm install hexo-renderer-pug hexo-renderer-stylus -D
    - 修改 Hexo 根目录下的  _config.yml  文件 theme: butterfly
    - 创建主题配置文件 \_config.butterfly.yml，从 node_modules/hexo-theme-butterfly/\_config.yml 复制默认配置到 \_config.butterfly.yml 文件
    - 重启查看效果：hexo clean; hexo g; hexo s (如下：主题修改成功)
      ![](/images/搭建个人博客/hexo_themes.png)
    - 将代码推送到远程，等构建完成(1-5 分钟)，线上博客链接的主题也完成了更换
