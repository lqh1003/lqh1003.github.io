---
title: 词云图
date: 2025-08-21 17:43:10
tags:
  - echarts-wordcloud
  - echarts
categories: Javascript
cover: /images/词云图/cover.jpg # 封面图
---

### 首先确保 echarts 和 echarts-wordcloud 都已正确安装，且版本兼容（echarts-wordcloud 需要与 echarts 主版本匹配）。

```bash
# 安装兼容版本（推荐最新稳定版）
npm install echarts@5.4.3 echarts-wordcloud@2.1.0 --save
```

### 使用(vue3 语法 + Element-Plus)

```html
<template>
	   
	<div class="containter-content">
		       
		<!-- 控制区域 -->
		       
		<div class="controls">
			           
			<el-button type="primary" @click="handleRefresh">刷新数据</el-button>    
			       
			<el-button type="primary" @click="toggleRotation">切换旋转模式</el-button>
			           
			<el-select v-model="currentShape" @change="handleShapeChange">
				               
				<el-option
					v-for="(item, index) in shapeList"
					:key="index"
					:label="item.label"
					:value="item.value"
				></el-option>
				           
			</el-select>
			       
		</div>

		       
		<!-- 词云容器 -->
		       
		<div ref="chartRef" class="chart-container"></div>

		       
		<!-- 点击信息 -->
		       
		<div class="info" v-if="activeWord">
			            选中：<strong>{{ activeWord.name }}</strong>，权重：{{
			activeWord.value }}        
		</div>
		   
	</div>
</template>

<script setup>
	import { ref, onMounted, onUnmounted, nextTick } from 'vue'
	import * as echarts from 'echarts'
	import 'echarts-wordcloud' // 引入词云扩展

	// 图表容器引用
	const chartRef = ref(null)
	// ECharts实例
	let chartInstance = null
	// 当前选中的词
	const activeWord = ref(null)
	// 是否开启旋转
	const isRotating = ref(false)
	// 当前形状
	const currentShape = ref('square')

	const shapeList = ref([
		{
			label: '正方形',
			value: 'square',
		},
		{
			label: '圆形',
			value: 'circle',
		},
		{
			label: '心形',
			value: 'cardioid',
		},
		{
			label: '菱形',
			value: 'diamond',
		},
		{
			label: '正三角形（尖端朝上）',
			value: 'triangle-forward',
		},
		{
			label: '倒三角形（尖端朝下）',
			value: 'triangle',
		},
		{
			label: '星形',
			value: 'star',
		},
		{
			label: '五边形',
			value: 'pentagon',
		},
	])

	// 原始词云数据（name:关键词, value:权重）
	const wordData = [
		{ name: '健康保险', value: 100 },
		{ name: '阅读协议', value: 80 },
		{ name: '普通设备机', value: 70 },
		{ name: '性别ocr识别不一致', value: 65 },
		{ name: '额度B', value: 60 },
		{ name: '没有安装D等级app', value: 55 },
		{ name: '全职', value: 90 },
		{ name: '近30天没有安装银行app', value: 50 },
		{ name: '子女教育', value: 45 },
		{ name: '认证未过切页面', value: 40 },
		{ name: '0核数', value: 35 },
		{ name: '决策正常', value: 30 },
		{ name: '近15天未有优质短信', value: 25 },
		{ name: '响应式', value: 40 },
		{ name: 'HTML5', value: 35 },
		{ name: 'CSS3', value: 30 },
		{ name: '预审批', value: 20 },
		{ name: '双鱼座', value: 15 },
		{ name: '近9999天有申请成功', value: 85 },
		{ name: '中学', value: 10 },
		{ name: '没有孩子', value: 5 },
		{ name: '财务类频繁安装正常', value: 22 },
		{ name: '低到中度使用', value: 18 },
		{ name: '词云图', value: 65 },
		{ name: '前端开发', value: 55 },
		{ name: 'Vue3', value: 80 },
		{ name: 'JavaScript', value: 70 },
		{ name: 'js2wordcloud', value: 60 },
		{ name: 'Composition API', value: 50 },
		{ name: '组件化', value: 45 },
		{ name: '交互', value: 25 },
		{ name: '可视化', value: 20 },
		{ name: 'Canvas', value: 15 },
		{ name: 'uniapp', value: 30 },
		{ name: 'Nuxtjs', value: 20 },
		{ name: 'React', value: 5 },
		{ name: 'PS', value: 30 },
		{ name: 'AXIOS', value: 10 },
		{ name: 'FORMDATA', value: 20 },
		{ name: 'JSON', value: 50 },
		{ name: '结婚人数', value: 50 },
		{ name: '国庆节', value: 150 },
		{ name: '元旦节', value: 120 },
		{ name: '端午节', value: 70 },
		{ name: '中秋节', value: 100 },
		{ name: '1937.08.15日本投降', value: 150 },
	]

	// 初始化图表
	const initChart = async () => {
		// 确保DOM渲染完成
		await nextTick() // 销毁已有实例

		if (chartInstance) {
			chartInstance.dispose()
		} // 创建实例

		chartInstance = echarts.init(chartRef.value) // 设置图表配置

		const option = {
			tooltip: {
				show: true,
				formatter: (params) => `${params.name}: ${params.value}`,
			},
			series: [
				{
					type: 'wordCloud', // 词云类型
					grid: [10, 10, 10, 10], // 内边距
					sizeRange: [12, 60], // 字体大小范围
					rotationRange: isRotating.value ? [-90, 90] : [0, 0], // 旋转角度范围
					shape: currentShape.value, // 整体形状
					spacing: 10, // 词语间距（像素）
					layoutAnimation: true, // 布局动画
					textStyle: {
						color: function () {
							// 随机颜色
							return `rgb(${Math.round(Math.random() * 255)}, ${Math.round(
								Math.random() * 200
							)}, ${Math.round(Math.random() * 255)})`
						},
						fontFamily: 'Microsoft YaHei, sans-serif',
						emphasis: {
							shadowBlur: 20,
							shadowColor: '#333',
						},
					},
					data: wordData, // 词云数据 // 点击事件
					emphasis: {
						focus: 'self',
						scale: 1.1, // 选中时放大
					},
				},
			],
		} // 设置配置项

		chartInstance.setOption(option) // 绑定点击事件

		chartInstance.on('click', (params) => {
			activeWord.value = params.data
		}) // 监听窗口大小变化，自动调整图表

		const handleResize = () => {
			chartInstance.resize()
		}
		window.addEventListener('resize', handleResize) // 组件卸载时移除监听

		onUnmounted(() => {
			window.removeEventListener('resize', handleResize)
		})
	}

	// 刷新数据（随机调整权重）
	const handleRefresh = () => {
		const newData = wordData.map((item) => ({
			...item,
			value: Math.floor(Math.random() * (item.value / 2) + item.value / 2),
		}))
		chartInstance.setOption({
			series: [{ data: newData }],
		})
	}

	// 切换旋转模式
	const toggleRotation = () => {
		isRotating.value = !isRotating.value // 重新设置
		chartInstance.setOption({
			series: [
				{
					rotationRange: isRotating.value ? [-90, 90] : [0, 0],
				},
			],
		})
	}

	// 切换形状
	const handleShapeChange = () => {
		chartInstance.setOption({
			series: [{ shape: currentShape.value }],
		})
	}

	// 初始化图表
	onMounted(() => {
		initChart()
	})

	// 组件卸载时销毁实例
	onUnmounted(() => {
		if (chartInstance) {
			chartInstance.dispose()
		}
	})
</script>

<style lang="scss" scoped>
	.containter-content {
	    background-color: #F0F2F5;
	}
	.controls {
	    margin: 10px 10px 20px;
	    display: flex;
	    gap: 15px;
	    align-items: center;
	    flex-wrap: wrap;
	    .el-button+.el-button {
	        margin: 0 !important;
	    }
	}
	.chart-container {
	    width: 100%;
	    min-height: 700px;
	    border-radius: 8px;
	    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
	    background-color: #fff;
	}
	.info {
	    margin-top: 15px;
	    padding: 10px;
	    background-color: #f0f7ff;
	    border-radius: 4px;
	    color: #1890ff;
	    font-size: 14px;
	}
</style>
```

### 效果图
![](/images/词云图/result.png)